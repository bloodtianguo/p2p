$(function(){document.getElementById("Rule").onclick=function(){this.checked?document.getElementById("login").disabled=!1:(document.getElementById("login").disabled=!0,alert("请勾选使用协议"))};var a=/^[a-zA-Z][a-zA-Z0-9]{3,15}$/,r=/^[a-zA-Z0-9]{4,10}$/,l=/^\w{3,12}@\w{1,5}\.[a-z]{2,3}$/,t=/^[\u4E00-\u9FA5A-Za-z0-9_]+$/,s=!1,n=!1,d=!1,u=!1,o=!1;$("#username").blur(function(){var e=$("#username").val();a.test(e)&&""!=e?($(".user").html(""),$.ajax({type:"get",url:"http://127.0.0.1:8848/accrepeat.php",data:{username:e},success:function(e){if("fail"===e)return $(".user").html("用户名已注册!!!").addClass("erro"),s=!1;$(".user").html("用户名可用!!!").removeClass("erro").addClass("erro2"),s=!0}})):$(".user").html("请输入正确的用户名格式").addClass("erro")}),$("#nickname").blur(function(){var e=$("#nickname").val();if(!t.test(e)||""==e)return $(".nick").html("请输入符合规则的昵称").addClass("erro"),n=!1;n=!0,$(".nick").html("昵称可用").removeClass("erro").addClass("erro2")}),$("#pwd").blur(function(){var e=$("#pwd").val();if(!r.test(e)||""==e)return $(".pwd").html("请输入符合规则的密码").addClass("erro"),d=!1;d=!0,$(".pwd").html("密码可用").removeClass("erro").addClass("erro2")}),$("#pwd2").blur(function(){var e=$("#pwd").val(),a=$("#pwd2").val();if(a!==e||""==a)return $(".pwd2").html("两次输入的密码不一致").addClass("erro"),u=!1;u=!0,$(".pwd2").html("密码一致").removeClass("erro").addClass("erro2")}),$("#email").blur(function(){var e=$("#email").val();if(!l.test(e)||""==e)return $(".email").html("请输入正确的邮箱").addClass("erro"),o=!1;o=!0,$(".email").html("成功").removeClass("erro").addClass("erro2")}),$("#login").click(function(){s&&n&&d&&u&&o?$.ajax({type:"post",url:"http://127.0.0.1:8848/reg.php",data:{username:$("#username").val(),pwd:$("#pwd").val(),email:$("#email").val(),nickname:$("#nickname").val()},success:function(e){"ok"===e?(alert("恭喜!注册成功"),location.href="./login.html"):alert("哦豁!注册失败!请重试")}}):($("#username").blur(),$("#nickname").blur(),$("#pwd").blur(),$("#pwd2").blur(),$("#email").blur())})});